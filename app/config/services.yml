# Learn more about services, parameters and containers at
# https://symfony.com/doc/current/service_container.html
# Force container rebuild: version-12345

imports:
    - { resource: services/cache.yml }
    - { resource: services/doctrine_cache.yml }

parameters:
    #parameter_name: value
    ezrepoforms.user_register.registration_groups:
        default: [12, 34]
    ezrepoforms.user_register.registration_content_types:
        default: ['user']

services:
    # default configuration for services in *this* file
    _defaults:
        # automatically injects dependencies in your services
        autowire: true
        # automatically registers your services as commands, event subscribers, etc.
        autoconfigure: true
        # this means you cannot fetch services directly from the container via $container->get()
        # if you need to do this, you can override this setting on individual services
        public: false
    EzSystems\EzPlatformUser\ConfigResolver\RegistrationContentTypeLoader:
        alias: ezrepoforms.user_register.registration_content_type_loader.configurable
    EzSystems\EzPlatformUser\ConfigResolver\RegistrationGroupLoader:
        alias: ezrepoforms.user_register.registration_group_loader.configurable

    ezrepoforms.user_register.registration_group_loader.configurable:
        class: EzSystems\RepositoryForms\User\ConfigurableRegistrationGroupLoader
        arguments:
            $params: '%ezrepoforms.user_register.registration_groups%'
    ezrepoforms.user_register.registration_content_type_loader.configurable:
        class: EzSystems\RepositoryForms\User\ConfigurableRegistrationContentTypeLoader
        arguments:
            $params: '%ezrepoforms.user_register.registration_content_types%'

    # Alias for admin UI firewall siteaccess matcher (defined in admin-ui-bundle)
    app.security.admin_ui_siteaccess_matcher:
        alias: netgen_admin_ui.security.siteaccess_request_matcher
        public: true

    # Alias Redis cache requests to APCu adapter (for eZ Platform's CacheFactory compatibility)
    # eZ Platform expects a 'cache.redis' service - we redirect this to our active APCu cache pool
    cache.redis:
        alias: cache.apcu
        public: true
