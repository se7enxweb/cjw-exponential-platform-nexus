{# content \Netgen\EzPlatformSiteApi\API\Values\Content #}
{# location \Netgen\EzPlatformSiteApi\API\Values\Location #}

{% import '@ezdesign/parts/content_fields.html.twig' as content_fields %}

{% set video_types = content.fields.video_type.value.identifiers %}
{% set video_identifier = null %}

{% if content.fields.video_identifier is defined and not content.fields.video_identifier.empty %}
    {% set video_identifier = content.fields.video_identifier.value.text %}
{% endif %}

{% if not content.fields.video_file.empty or not content.fields.video_file_hd.empty or not content.fields.video_identifier.empty %}
    {% if 'vimeo' in video_types %}
        <div class="embed-video-container">
            {% if content.fields.poster is defined and not content.fields.poster.empty %}
                <a data-fancybox="{{ view_type }}" href="https://vimeo.com/{{ video_identifier }}" style="position: relative; display: inline-block">
                    <img src="{{ ng_image_alias(content.fields.poster, 'i770').uri }}" alt="" />

                    {% if content.fields.teaser_intro is defined and not content.fields.teaser_intro.empty %}
                        {{ ng_render_field(content.fields.teaser_intro) }}
                    {% elseif content.fields.description is defined and not content.fields.description.empty %}
                        {{ ng_render_field(content.fields.description) }}
                    {% endif %}

                    <img class="play" src="{{ asset( 'bundles/app/images/icons/icon-play.png' ) }}" alt=">" />
                </a>
            {% else %}
                <div class="embed-video">
                    <a class="open-in-overlay" data-fancybox="{{ view_type }}" href="https://vimeo.com/{{ video_identifier }}">
                        <img src="{{ asset( 'bundles/app/images/icons/symbol-plus.png' ) }}" alt="+" />
                    </a>

                    <iframe frameborder="0" class="embed-responsive-item" src="https://player.vimeo.com/video/{{ video_identifier }}?byline=false&title=false&portrait=false&loop=true" style="width: 100%;"></iframe>
                </div>
            {% endif %}
        </div>
    {% endif %}
{% endif %}
