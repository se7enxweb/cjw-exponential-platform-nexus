{# content \Netgen\EzPlatformSiteApi\API\Values\Content #}
{# location \Netgen\EzPlatformSiteApi\API\Values\Location #}

{% import "@ezdesign/parts/macros/cjw_macros.html.twig" as cjw_macros %}
{% import '@ezdesign/parts/macros/cjw_content_fields.html.twig' as cjw_content_fields %}
{% import '@ezdesign/parts/content_fields.html.twig' as content_fields %}

{% set image = null %}

{% if content.fields.image is defined and not content.fields.image.empty %}
    {% set image = ng_image_alias( content.fields.image, 'i1920' ).uri %}
{% endif %}

{% set use_link = false %}

{% if content.fields.body is defined and content.fields.body.empty %}
    {% set use_link = false %}
{% endif %}

{% if content.fields.related_object is defined and not content.fields.related_object.empty %}
    {% set use_link = true %}
{% endif %}

{% block content %}
    <article
        class="view-type view-type-{{ view_type }} banner"{% if image is not null %} style="background-image: url( '{{ image }}' );"{% endif %}>
        <div class="article-content">
            <header class="article-header">
                <div class="title">
                    {% if use_link %}
                        <a {{ cjw_macros.content_relation_parameters( location, content ) }}>{{ content_fields.title(content) }}</a>
                    {% else %}
                        {{ content_fields.title(content) }}
                    {% endif %}
                </div>
            </header>

            <div class="short">
                {{ cjw_content_fields.short_description( content ) }}
            </div>
        </div>
    </article>
{% endblock %}
