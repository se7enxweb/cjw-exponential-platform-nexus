{# content \Netgen\EzPlatformSiteApi\API\Values\Content #}
{# location \Netgen\EzPlatformSiteApi\API\Values\Location #}

{% extends nglayouts.layoutTemplate %}

{% import '@ezdesign/parts/content_fields.html.twig' as content_fields %}

{% set show_path = true %}

{% if not content.fields.teaser_intro.empty %}
    {% set meta_data = {'description': content.fields.teaser_intro.value.xml.saveXML()|striptags|trim|truncate(152)} %}
{% elseif not content.fields.full_intro.empty %}
    {% set meta_data = {'description': content.fields.full_intro.value.xml.saveXML()|striptags|trim|truncate(152)} %}
{% endif %}

{% block content %}
    {% if app.request.query.get( 'overlay' ) == 'yes' %}
        <div class="map-overlay">
            {% include "@ezdesign/parts/leaflet_map.html.twig" %}
        </div>
    {% else %}
        <article class="view-type view-type-{{ view_type }} ng-article vf1">
            {% block content_header %}
                {% block title %}
                    <h1 class="title{#full-page-title#}">{{ ng_render_field(content.fields.title) }}</h1>
                {% endblock %}

                {% block intro %}
                    {% if not content.fields.full_intro.empty %}
                        <div class="article-intro">
                            {{ ng_render_field(content.fields.full_intro) }}
                        </div>
                    {% endif %}
                {% endblock %}
            {% endblock %}

            {% block content_body %}
                <div class="container">
                    <div class="full-article-content">
                        {% block body %}
                            {% if not content.fields.body.empty %}
                                <div class="full-article-body">
                                    {{ ng_render_field(content.fields.body) }}
                                </div>
                            {% endif %}

                            {% include "@ezdesign/parts/leaflet_map.html.twig" %}
                        {% endblock %}
                    </div>
                </div>
            {% endblock %}
        </article>
    {% endif %}
{% endblock %}
